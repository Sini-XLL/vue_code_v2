{"ast":null,"code":"import { ref, reactive, onMounted, computed } from 'vue';\nimport { useStore } from 'vuex';\nimport { ElMessage } from 'element-plus';\nimport { CascaderProps } from 'element-plus';\nexport default {\n  setup(props, context) {\n    const store = useStore();\n    const DeleteDialogVisible = ref(false);\n    const selectedRowID = ref();\n\n    // 存放全部文章数据\n    const tableData = reactive({\n      data: []\n    });\n    const getArticles = () => {\n      store.dispatch('article/getArticles', '').then(response => {\n        console.log(response.data);\n        tableData.data = response.data;\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n    // 打开删除对话框，复制选中行ID\n    const showDeleteDialog = data => {\n      DeleteDialogVisible.value = !DeleteDialogVisible.value;\n      selectedRowID.value = data;\n    };\n    // 表格\n\n    const search = ref('');\n    const handleEdit = ID => {\n      console.log(ID);\n    };\n    const handleDelete = () => {\n      console.log(selectedRowID.value);\n      const data = {\n        \"ID\": selectedRowID.value\n      };\n      store.dispatch(\"article/deleteArticleByID\", data).then(response => {\n        console.log(response);\n        ElMessage({\n          message: '删除成功',\n          type: 'success'\n        });\n        getArticles();\n      }).catch(err => {\n        console.log(err);\n      });\n      DeleteDialogVisible.value = !DeleteDialogVisible.value;\n    };\n    // 格式化日期\n    const formatTime = timeString => {\n      const date = new Date(timeString);\n      const year = date.getFullYear();\n      const month = String(date.getMonth() + 1).padStart(2, '0'); // 月份是从0开始的，所以需要+1，并使用padStart补零\n      const day = String(date.getDate()).padStart(2, '0'); // 使用padStart补零\n      const hour = String(date.getHours()).padStart(2, '0'); // 使用padStart补零\n      const minute = String(date.getMinutes()).padStart(2, '0'); // 使用padStart补零\n      const second = String(date.getSeconds()).padStart(2, '0'); // 使用padStart补零\n\n      return `${year}年${month}月${day}日 ${hour}:${minute}:${second}`;\n    };\n    onMounted(() => {\n      getArticles();\n    });\n    return {\n      tableData,\n      formatTime,\n      handleEdit,\n      handleDelete,\n      DeleteDialogVisible,\n      showDeleteDialog\n    };\n  }\n};","map":{"version":3,"names":["ref","reactive","onMounted","computed","useStore","ElMessage","CascaderProps","setup","props","context","store","DeleteDialogVisible","selectedRowID","tableData","data","getArticles","dispatch","then","response","console","log","catch","err","showDeleteDialog","value","search","handleEdit","ID","handleDelete","message","type","formatTime","timeString","date","Date","year","getFullYear","month","String","getMonth","padStart","day","getDate","hour","getHours","minute","getMinutes","second","getSeconds"],"sources":["D:\\graduate_design\\project\\movieweb\\MovieClient\\movieclient\\src\\views\\Admin\\MovieManage\\index.vue"],"sourcesContent":["<template>\r\n    <div>\r\n\r\n        <el-row>\r\n            <el-col :span=\"2\"></el-col>\r\n            <el-col :span=\"20\">\r\n                <!-- 省份表格 -->\r\n                <el-table :data=\"tableData.data\" stripe style=\"width: 100%\">\r\n                    <el-table-column label=\"序号\" prop=\"ID\"> <template #default=\"scope\">\r\n                            {{ scope.$index + 1 }}\r\n                        </template></el-table-column>\r\n                    <el-table-column label=\"标题\" prop=\"title\" />\r\n                    <el-table-column label=\"发表者\" prop=\"username\" />\r\n                    <el-table-column label=\"发布时间\">\r\n                        <template #default=\"scope\">\r\n                            {{ formatTime(scope.row.CreatedAt) }}\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column align=\"center\">\r\n                        <template #header>\r\n                            <el-input v-model=\"search\" size=\"large\" placeholder=\"Type to search\" />\r\n                        </template>\r\n                        <template #default=\"scope\">\r\n                            <!-- 查看的按钮还没做 管理员没有编辑用户文章权利只能查看 -->\r\n                            <el-button size=\"small\" type=\"success\" @click=\"handleEdit(scope.row.ID)\">查看</el-button>\r\n                            <el-button size=\"small\" type=\"danger\" @click=\"showDeleteDialog(scope.row.ID)\">删除</el-button>\r\n\r\n                        </template>\r\n                    </el-table-column>\r\n\r\n\r\n\r\n\r\n                </el-table><el-dialog v-model=\"DeleteDialogVisible\" title=\"Warning\" width=\"500\" center>\r\n                    <span>\r\n                        确定删除该文章吗\r\n                    </span>\r\n                    <template #footer>\r\n                        <div class=\"dialog-footer\">\r\n                            <el-button @click=\"DeleteDialogVisible = false\">Cancel</el-button>\r\n                            <el-button type=\"primary\" @click=\"handleDelete()\">\r\n                                Confirm\r\n                            </el-button>\r\n                        </div>\r\n                    </template>\r\n                </el-dialog>\r\n\r\n            </el-col>\r\n            <el-col :span=\"2\"></el-col>\r\n        </el-row>\r\n\r\n\r\n\r\n    </div>\r\n\r\n</template>\r\n<script>\r\nimport { ref, reactive, onMounted, computed } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { ElMessage } from 'element-plus'\r\nimport { CascaderProps } from 'element-plus'\r\nexport default {\r\n    setup(props, context) {\r\n\r\n        const store = useStore()\r\n        const DeleteDialogVisible = ref(false)\r\n        const selectedRowID = ref()\r\n\r\n\r\n        // 存放全部文章数据\r\n        const tableData = reactive(\r\n            {\r\n                data: []\r\n            }\r\n        )\r\n\r\n        const getArticles = () => {\r\n            store.dispatch('article/getArticles', '').then(response => {\r\n                console.log(response.data);\r\n                tableData.data = response.data\r\n\r\n            }).catch(err => {\r\n                console.log(err);\r\n            })\r\n        }\r\n        // 打开删除对话框，复制选中行ID\r\n        const showDeleteDialog = (data) => {\r\n            DeleteDialogVisible.value = !DeleteDialogVisible.value\r\n            selectedRowID.value = data\r\n        }\r\n        // 表格\r\n\r\n        const search = ref('')\r\n\r\n        const handleEdit = (ID) => {\r\n            console.log(ID)\r\n        }\r\n        const handleDelete = () => {\r\n            console.log(selectedRowID.value)\r\n            const data = {\r\n                \"ID\": selectedRowID.value\r\n            }\r\n            store.dispatch(\"article/deleteArticleByID\", data).then(response => {\r\n                console.log(response);\r\n                ElMessage({\r\n                    message: '删除成功',\r\n                    type: 'success',\r\n                })\r\n                getArticles()\r\n            }).catch(err => {\r\n                console.log(err);\r\n            })\r\n            DeleteDialogVisible.value = !DeleteDialogVisible.value\r\n        }\r\n        // 格式化日期\r\n        const formatTime = (timeString) => {\r\n            const date = new Date(timeString);\r\n            const year = date.getFullYear();\r\n            const month = String(date.getMonth() + 1).padStart(2, '0'); // 月份是从0开始的，所以需要+1，并使用padStart补零\r\n            const day = String(date.getDate()).padStart(2, '0'); // 使用padStart补零\r\n            const hour = String(date.getHours()).padStart(2, '0'); // 使用padStart补零\r\n            const minute = String(date.getMinutes()).padStart(2, '0'); // 使用padStart补零\r\n            const second = String(date.getSeconds()).padStart(2, '0'); // 使用padStart补零\r\n\r\n            return `${year}年${month}月${day}日 ${hour}:${minute}:${second}`;\r\n        }\r\n\r\n\r\n\r\n        onMounted(() => {\r\n            getArticles()\r\n\r\n\r\n\r\n        });\r\n\r\n\r\n\r\n        return {\r\n\r\n            tableData,\r\n            formatTime,\r\n            handleEdit,\r\n            handleDelete,\r\n            DeleteDialogVisible,\r\n            showDeleteDialog\r\n\r\n\r\n\r\n        }\r\n\r\n\r\n    }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.table {\r\n    margin-top: 20px;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}